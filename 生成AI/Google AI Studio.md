### System instructions（システム指示）

*   **言葉の意味:**
    ユーザーからの質問（プロンプト）を受け取る**前**に、AIモデルに対してあらかじめ与えておく**「基本的な役割、性格、行動指針」**を定義する指示のことです。「キャラクター設定」や「憲法」のようなものだと考えると分かりやすいです。

*   **機能の効果:**
    この機能を使うことで、AIの応答スタイルやトーン、守るべきルールを一貫してコントロールできます。会話の途中でAIのキャラクターがぶれたり、毎回同じ指示をプロンプトに含めたりする必要がなくなるため、より安定した対話アプリケーションを効率的に構築できます。

*   **使用の有無による差:**

    *   **使用しない場合（無の場合）:**
        AIは一般的なアシスタントとして、ニュートラルな立場で回答します。
        
        **【ユーザーの質問】**
        「AIの将来性について教えてください。」
        
        **【AIの典型的な回答】**
        「AIの将来性は非常に高いと考えられています。医療、金融、交通など、さまざまな分野での応用が期待されており、私たちの生活をより豊かにする可能性を秘めています。」

    *   **使用する場合（有の場合）:**
        AIに特定の役割や口調を演じさせ、常に出力の形式を制御することができます。

        **【System instructionsの設定例】**
        ```
        あなたは、未来から来た楽観的なAI研究者です。
        # 制約
        *   全ての回答は、必ずポジティブで希望に満ちた口調で行ってください。
        *   専門用語は避け、中学生にも分かるように、必ず具体的な例え話を使って説明してください。
        *   回答の最後は、必ず「未来は、思っているよりずっと明るいですよ！」という言葉で締めくくってください。
        ```

        **【ユーザーの質問】**
        「AIの将来性について教えてください。」
        
        **【System instructionsに従ったAIの回答】**
        「AIの未来ですか？それはもう、素晴らしい可能性に満ちあふれていますよ！例えば、AIはまるで優秀な家庭教師が一人ひとりの生徒につくようなもので、誰もが自分のペースで楽しく学べるようになります。また、新しい薬を開発する時間が、まるでインスタントラーメンを作るくらい短くなるかもしれません。
        
        未来は、思っているよりずっと明るいですよ！」

`System instructions`はAIの振る舞いを安定させるために非常に強力な機能ですが、その内容は**APIリクエストのたびに入力トークンとして消費**されます。

そのため、コストを最適化するためには、**System instructionsを可能な限り簡潔かつ効果的に記述する**ことが重要になります。

### Temperature（温度）

*   **言葉の意味:**
    応答の**「ランダム性」や「創造性」**を調整するパラメータです。値は0から1の間で設定します。
*   **機能の効果:**
    この値を変更することで、AIの回答がどれだけ予測可能か、あるいはどれだけ独創的になるかをコントロールできます。
*   **使用の有無による差:**
    *   **低い値（例: 0.2）に設定した場合:**
        AIは最も確率の高い、ありきたりで事実に基づいた回答を生成しやすくなります。**毎回ほぼ同じ、安定した回答**が返ってきます。
        （用途：記事の要約、質疑応答など、正確さが求められるタスク）
    *   **高い値（例: 1.0）に設定した場合:**
        AIはより多様で、時には予期せぬクリエイティブな回答を生成します。**毎回異なる、独創的なアイデア**が出やすくなります。
        （用途：ブレインストーミング、物語の作成など、創造性が求められるタスク）

### Media resolution（メディア解像度）

*   **言葉の意味:**
    AIに画像や動画を読み込ませる際の**「解像度（細かさ）」**を設定します。
*   **機能の効果:**
    AIが画像をどれだけ詳細に分析するかを決定します。高解像度にすると、より多くの情報を読み取れますが、処理コスト（トークン）が増加します。
*   **使用の有無による差:**
    *   **Default（デフォルト）/ Low（低）の場合:**
        画像全体の大まかな内容を理解するのに適しています。処理が速く、コストも低いです。
    *   **High（高）の場合:**
        画像内の細かい文字を読み取ったり、専門的な図の細部を分析したりする場合に必要です。より正確な分析が可能になりますが、処理が遅くなりコストも高くなります。

---

### Thinking（思考）

#### Thinking mode（思考モード）

*   **言葉の意味:**
    AIに最終的な回答を出す前に、**「思考のプロセス」**を一度書き出させるモードです。
*   **機能の効果:**
    複雑で多段階の推論が必要な問題に対して、AIが一度自分の思考を整理することで、最終的な回答の精度を向上させます。
*   **使用の有無による差:**
    *   **OFFの場合:**
        質問に対して直接、最終的な回答を生成します。
    *   **ONの場合:**
        AIはまず「まず、この問題の要点は何かを考える。次に…」といった思考プロセスを出力し、その後に最終的な回答を出します。これにより、難しい問題でもより正確な答えにたどり着きやすくなります。

#### Set thinking budget（思考バジェットの設定）

*   **言葉の意味:**
    上記の「思考モード」で使われる思考プロセスの**長さ（トークン数）の上限**を設定します。
*   **機能の効果:**
    思考プロセスが長くなりすぎて、コスト（トークン）がかかりすぎるのを防ぎます。
*   **使用の有無による差:**
    *   **OFFの場合:**
        思考の長さに制限はありません。
    *   **ONの場合:**
        設定したトークン数に達すると、思考を打ち切って回答の生成に移ります。

---

### Tools（ツール）

#### Structured output（構造化出力）

*   **言葉の意味:**
    AIの出力を、**JSONのような決まった形式（スキーマ）**に強制する機能です。
*   **機能の効果:**
    出力をプログラムで扱いやすい、機械可読な形式に固定できます。
*   **使用の有無による差:**
    *   **OFFの場合:**
        「彼の名前は山田太郎で、年齢は30歳です」のような、自由な文章で回答します。
    *   **ONの場合:**
        `{"name": "山田太郎", "age": 30}` のように、必ず指定したJSON形式で回答します。アプリケーションへの組み込みに不可欠です。

#### Code execution（コード実行）

*   **言葉の意味:**
    AIが**Pythonコードを内部で実際に実行**する能力を有効にします。
*   **機能の効果:**
    正確な計算、データ分析、ファイル操作などが可能になります。
*   **使用の有無による差:**
    *   **OFFの場合:**
        「`543 * 123`を計算するコードは`print(543 * 123)`です」とコードを書くことはできますが、計算結果は分かりません。
    *   **ONの場合:**
        コードを実行し、「`66789`です」と**正しい計算結果**を回答できます。

#### Function calling（関数呼び出し）

*   **言葉の意味:**
    AIが外部のAPIや、あなたが定義した**特定の機能（関数）を呼び出す**ことを許可します。
*   **機能の効果:**
    AIの能力を拡張し、外部のデータベースと連携したり、特定の操作を実行させたりできます。
*   **使用の有無による差:**
    *   **OFFの場合:**
        AIは自身の知識だけで回答します。「東京の今の天気は？」と聞いても、リアルタイムの情報は答えられません。
    *   **ONの場合:**
        あなたが用意した天気API（例: `get_weather("東京")`）をAIが呼び出し、「現在の東京の天気は晴れです」と**リアルタイムの情報**を回答できます。

#### Grounding with Google Search（Google検索によるグラウンディング）

*   **言葉の意味:**
    AIの回答を、**リアルタイムのGoogle検索結果に「基づかせる（Grounding）」**機能です。
*   **機能の効果:**
    AIの知識を最新の状態に保ち、事実に基づかない回答（ハルシネーション）を減らします。
*   **使用の有無による差:**
    *   **OFFの場合:**
        AIは学習データがカットオフされた時点までの古い知識で答えます。「昨日の首相会見の内容は？」と聞いても答えられません。
    *   **ONの場合:**
        Google検索で最新情報を調べ、「昨日の会見では〇〇が発表されました」と**最新の情報**に基づいて回答します。

#### URL context（URLコンテキスト）

*   **言葉の意味:**
    あなたが指定した**特定のウェブページ（URL）の内容を「文脈（Context）」としてAIに読み込ませる**機能です。
*   **機能の効果:**
    AIの知識を、そのページの内容だけに限定させ、特定の情報源に基づいた回答をさせることができます。
*   **使用の有無による差:**
    *   **OFFの場合:**
        一般的な知識で回答します。
    *   **ONの場合:**
        特定のニュース記事のURLを渡し、「この記事を要約して」と頼むと、AIはその記事の内容だけを忠実に要約します。

---

### Advanced settings（高度な設定）

#### Safety settings（安全性設定）

*   **言葉の意味:**
    有害なコンテンツ（ヘイトスピーチ、暴力的な表現など）をブロックするための**安全フィルターの強度**を調整します。
*   **機能の効果:**
    アプリケーションの用途に応じて、安全性の基準を変更できます。

#### Add stop sequence（停止シーケンスの追加）

*   **言葉の意味:**
    AIがこの**特定の文字列を生成したら、応答を即座に停止する**というルールを追加します。
*   **機能の効果:**
    応答の終わりを正確にコントロールできます。
    （例：「---」を停止シーケンスに指定すると、AIは「---」を生成する直前で必ず文章を終えます）

#### Output length（出力の長さ）

*   **言葉の意味:**
    応答の**最大長をトークン数で指定**します。
*   **機能の効果:**
    応答が不必要に長くなったり、短すぎたりするのを防ぎます。

#### Top P

*   **言葉の意味:**
    Temperatureと似ていますが、こちらは次に来る単語の**選択肢を確率の合計値で絞り込む**方法です。
*   **機能の効果:**
    応答の多様性をコントロールするもう一つの方法です。一般的には、TemperatureかTop Pのどちらか一方を調整することが推奨されます。